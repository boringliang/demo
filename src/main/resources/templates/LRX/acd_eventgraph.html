<!DOCTYPE html>
<html lang="en" dir="ltr" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>Sleek - Admin Dashboard Template</title>

    <!-- GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500|Poppins:400,500,600,700|Roboto:400,500"
          rel="stylesheet"/>
    <link href="https://cdn.materialdesignicons.com/3.0.39/css/materialdesignicons.min.css" rel="stylesheet"/>

    <!-- PLUGINS CSS STYLE -->
    <link href="../../static/assets/plugins/toaster/toastr.min.css" rel="stylesheet"/>
    <link href="../../static/assets/plugins/nprogress/nprogress.css" rel="stylesheet"/>
    <link href="../../static/assets/plugins/flag-icons/css/flag-icon.min.css" rel="stylesheet"/>
    <link href="../../static/assets/plugins/jvectormap/jquery-jvectormap-2.0.3.css" rel="stylesheet"/>
    <link href="../../static/assets/plugins/ladda/ladda.min.css" rel="stylesheet"/>
    <link href="../../static/assets/plugins/select2/css/select2.min.css" rel="stylesheet"/>
    <link href="../../static/assets/plugins/daterangepicker/daterangepicker.css" rel="stylesheet"/>

    <!-- SLEEK CSS -->
    <link id="sleek-css" rel="stylesheet" href="../../static/assets/css/sleek.css"/>


    <!-- FAVICON -->
    <link href="../../static/assets/img/favicon.png" rel="shortcut icon"/>

    <!--
      HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries
    -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="../../static/assets/plugins/nprogress/nprogress.js"></script>
    <script src="../../static/assets/d3.js" charset="utf-8"></script>
    <script src="../../static/assets/d3.min.js" charset="utf-8"></script>
    <script src="../../static/assets/echarts.min.js"></script>
    <script src="../../static/assets/js/echarts-gl.min.js"></script>


    <script src="../../static/assets/plugins/jquery/jquery.min.js"></script>
    <script src="../../static/assets/widgets/code/jquery.calendar.js"></script>
    <script src="../../static/assets/widgets/code/jquery.popup.js"></script>
    <script src="../../static/assets/LYWutils_traffic_jam.js"></script>
    <!--    <script charset="utf-8" src="https://map.qq.com/api/js?v=2.exp&key=PUBBZ-ED365-YF4IE-QAFHX-EE6M2-UVFFI"></script>-->
    <script src="../../static/assets/sidebar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12"></script>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- 引入组件库 -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>


</head>


<body class="sidebar-fixed sidebar-dark header-light header-fixed" id="body">
<script src="../../static/assets/js/jquery-1.9.1.min.js"></script>
<script>
    NProgress.configure({showSpinner: false});
    NProgress.start();
</script>

<div class="mobile-sticky-body-overlay"></div>

<div class="wrapper">

    <!--
====================================
——— LEFT SIDEBAR WITH FOOTER
=====================================
-->


    <div class="page-wrapper" style="overflow: auto; width: 1600px; height: 100%">
        <!-- Header -->
        <header class="main-header " id="header">
            <nav class="navbar navbar-static-top navbar-expand-lg">
                <!-- Sidebar toggle button -->
                <button id="sidebar-toggler" class="sidebar-toggle">
                    <span class="sr-only">Toggle navigation</span>
                </button>
                <!-- search form -->
                <div class="search-form d-none d-lg-inline-block">
                    <div class="input-group">
                        <button type="button" name="search" id="search-btn" class="btn btn-flat">
                            <i class="mdi mdi-magnify"></i>
                        </button>
                        <input type="text" name="query" id="search-input" class="form-control"
                               placeholder="'button', 'chart' etc." autofocus autocomplete="off"/>
                    </div>
                    <div id="search-results-container">
                        <ul id="search-results"></ul>
                    </div>
                </div>

                <div class="navbar-right ">
                    <ul class="nav navbar-nav">
                        <!-- Github Link Button -->
                        <li class="github-link mr-3">
                            <a class="btn btn-outline-secondary btn-sm"
                               href="https://github.com/tafcoder/sleek-dashboard"
                               target="_blank">
                                <span class="d-none d-md-inline-block mr-2">Source Code</span>
                                <i class="mdi mdi-github-circle"></i>
                            </a>

                        </li>
                        <li class="dropdown notifications-menu">
                            <button class="dropdown-toggle" data-toggle="dropdown">
                                <i class="mdi mdi-bell-outline"></i>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-right">
                                <li class="dropdown-header">You have 5 notifications</li>
                                <li>
                                    <a href="#">
                                        <i class="mdi mdi-account-plus"></i> New user registered
                                        <span class=" font-size-12 d-inline-block float-right"><i
                                                class="mdi mdi-clock-outline"></i> 10
                        AM</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="mdi mdi-account-remove"></i> User deleted
                                        <span class=" font-size-12 d-inline-block float-right"><i
                                                class="mdi mdi-clock-outline"></i> 07
                        AM</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="mdi mdi-chart-areaspline"></i> Sales report is ready
                                        <span class=" font-size-12 d-inline-block float-right"><i
                                                class="mdi mdi-clock-outline"></i> 12
                        PM</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="mdi mdi-account-supervisor"></i> New client
                                        <span class=" font-size-12 d-inline-block float-right"><i
                                                class="mdi mdi-clock-outline"></i> 10
                        AM</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="mdi mdi-server-network-off"></i> Server overloaded
                                        <span class=" font-size-12 d-inline-block float-right"><i
                                                class="mdi mdi-clock-outline"></i> 05
                        AM</span>
                                    </a>
                                </li>
                                <li class="dropdown-footer">
                                    <a class="text-center" href="#"> View All </a>
                                </li>
                            </ul>
                        </li>
                        <!-- User Account -->
                        <li class="dropdown user-menu">
                            <button href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
                                <img src="../../static/assets/img/user/user.png" class="user-image" alt="User Image"/>
                                <span class="d-none d-lg-inline-block">Abdus Salam</span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-right">
                                <!-- User image -->
                                <li class="dropdown-header">
                                    <img src="../../static/assets/img/user/user.png" class="img-circle"
                                         alt="User Image"/>
                                    <div class="d-inline-block">
                                        Abdus Salam
                                        <small class="pt-1">abdus@gmail.com</small>
                                    </div>
                                </li>

                                <li>
                                    <a href="profile.html">
                                        <i class="mdi mdi-account"></i> My Profile
                                    </a>
                                </li>
                                <li>
                                    <a href="email-inbox.html">
                                        <i class="mdi mdi-email"></i> Message
                                    </a>
                                </li>
                                <li>
                                    <a href="#"> <i class="mdi mdi-diamond-stone"></i> Projects </a>
                                </li>
                                <li>
                                    <a href="#"> <i class="mdi mdi-settings"></i> Account Setting </a>
                                </li>

                                <li class="dropdown-footer">
                                    <a href="signin.html"> <i class="mdi mdi-logout"></i> Log Out </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </nav>


        </header>


        <div class="content-wrapper">
            <div id="content">

                <template id="slide">
                    <div class="block">
                        <span class="demonstration">相异度
                            <!--                        </span><button @click="graph">生成图</button>-->
                        <el-slider v-model="value" :format-tooltip="formatTooltip"></el-slider>
                    </div>
                </template>
                <template id="calendar">
                    <div class="block">
                        <span class="demonstration">时间</span>
                        <el-date-picker
                                v-model="value"
                                type="datetimerange"
                                range-separator="至"
                                start-placeholder="开始日期"
                                end-placeholder="结束日期">
                        </el-date-picker>
                    </div>
                </template>
                <div class="row">
                    <div class="col-12">
                        <div id="graph" style="height: 500px; width: 100%"></div>
                    </div>
                </div>

            </div>
            <script>
                links = new Array();
                datas = new Array();
                //calendar的value是js的Date；slide的value是1到100的整数

                //下面是所有的Vue对象
                var MainCalendar = {
                    data() {
                        return {
                            value: [new Date(2020, 4, 10, 18, 47), new Date(2020, 6, 9, 6, 55)],
                        };
                    },
                    watch: {
                        value: function () {
                            $.ajax({
                                url: "/lrx/acd_eventgraph_ajax",
                                type: "POST",
                                data: {
                                    // "times": calendar.value,
                                    // "dissimilarity": slide.value
                                    "time1": calendar.value[0],
                                    "time2": calendar.value[1]
                                },
                                success: function (data) {
                                    //console.log(data);
                                    datas = getObject(data);
                                    console.log(datas)
                                    links = new Array();
                                    for (var i = 0; i < datas.length; i++) {
                                        datas[i].value = 20;
                                        datas[i].name = datas[i].SGBH;
                                    }
                                    var matrix = new Array(datas.length);
                                    for (var i = 0; i < matrix.length; i++) {
                                        matrix[i] = new Array(datas.length);
                                    }
                                    for (var i = 0; i < datas.length; i++) {
                                        for (var j = 0; j < datas.length; j++) {
                                            if (i === j) {
                                                matrix[i][j] = 0;
                                            }
                                            else {
                                                var dis = dissimilarity(datas[i], datas[j]);
                                                matrix[i][j] = dis;
                                                // datas[i].value += 3;
                                                // datas[j].value += 3;
                                                if (dis < slide.value / 100) {
                                                    links.push({
                                                        source: datas[i].name,
                                                        target: datas[j].name,
                                                    });
                                                }
                                            }
                                        }
                                    }
                                    // 初始化，如果你的容器id为main的<div></div>
                                    var myChart = echarts.init(
                                        document.getElementById('graph')
                                    )
                                    // 分类集合
                                    // var categories = [
                                    //     {name: '学校'},
                                    //     {name: '属性'},
                                    //     {name: '其他'}
                                    // ]
                                    // 配置项
                                    var option = {
                                        // 提示框设置
                                        tooltip: {
                                            // 关闭提示框
                                            show: true,
                                            trigger: 'item',
                                            formatter(params) {
                                                //console.log(params);
                                                var out = '';
                                                // for (p in params) {
                                                out += '<p>' + '事故编号:' + params.data.SGBH + '</p>';
                                                out += '<p>' + '行政登记:' + params.data.XZQH + '</p>';
                                                out += '<p>' + '登记编号:' + params.data.DJBH + '</p>';
                                                out += '<p>' + '开始勘察时间:' + params.data.KSKCSJ + '</p>';
                                                out += '<p>' + '结束勘察时间:' + params.data.JSKCSJ + '</p>';
                                                out += '<p>' + '路号:' + params.data.LH + '</p>';
                                                out += '<p>' + '路名:' + params.data.LM + '</p>';
                                                out += '<p>' + '公里数:' + params.data.GLS + '</p>';
                                                out += '<p>' + '米数:' + params.data.MS + '</p>';
                                                out += '<p>' + '绝对位置:' + params.data.JDWZ + '</p>';
                                                out += '<p>' + '事故地点:' + params.data.SGDD + '</p>';
                                                out += '<p>' + '在道路横断面位置:' + params.data.ZHDMWZ + '</p>';
                                                out += '<p>' + '交通信号方式:' + params.data.JTXHFS + '</p>';
                                                out += '<p>' + '路侧防护设施类型:' + params.data.FHSSLX + '</p>';
                                                out += '<p>' + '道路物理隔离:' + params.data.DLWLGL + '</p>';
                                                out += '<p>' + '路面状况:' + params.data.LMZK + '</p>';
                                                out += '<p>' + '路表情况:' + params.data.LBQK + '</p>';
                                                out += '<p>' + '路面结构:' + params.data.LMJG + '</p>';
                                                out += '<p>' + '路口路段类型:' + params.data.LKLDLX + '</p>';
                                                out += '<p>' + '道路线型:' + params.data.DLXX + '</p>';
                                                out += '<p>' + '道路类型:' + params.data.DLLX + '</p>';
                                                out += '<p>' + '勘察人1:' + params.data.KCR1 + '</p>';
                                                out += '<p>' + '勘察人2:' + params.data.KCR2 + '</p>';
                                                out += '<p>' + '办案人1:' + params.data.BAR1 + '</p>';
                                                out += '<p>' + '办案人2:' + params.data.BAR2 + '</p>';
                                                out += '<p>' + '当场死亡人数:' + params.data.SWRS + '</p>';
                                                out += '<p>' + '失踪人数:' + params.data.SZRS + '</p>';
                                                out += '<p>' + '重伤人数:' + params.data.ZSRS + '</p>';
                                                out += '<p>' + '轻伤人数:' + params.data.QSRS + '</p>';
                                                out += '<p>' + '受伤人数:' + params.data.SSRS + '</p>';
                                                out += '<p>' + '机动车数量:' + params.data.JDCSL + '</p>';
                                                out += '<p>' + '行人数量:' + params.data.XRSL + '</p>';
                                                out += '<p>' + '直接财产损失:' + params.data.ZJCCSS + '</p>';
                                                out += '<p>' + '事故类型:' + params.data.SGLX + '</p>';
                                                out += '<p>' + '事故初查原因分类:' + params.data.CCYYFL + '</p>';
                                                out += '<p>' + '事故认定原因分类:' + params.data.RDYYFL + '</p>';
                                                out += '<p>' + '简要案情:' + params.data.JYAQ + '</p>';
                                                out += '<p>' + '天气:' + params.data.TQ + '</p>';
                                                out += '<p>' + '能见度:' + params.data.NJD + '</p>';
                                                out += '<p>' + '现场:' + params.data.XC + '</p>';
                                                out += '<p>' + '事故形态:' + params.data.SGXT + '</p>';
                                                out += '<p>' + '车辆间事故:' + params.data.CLJSG + '</p>';
                                                out += '<p>' + '地形:' + params.data.DX + '</p>';
                                                out += '<p>' + '照明条件:' + params.data.ZMTJ + '</p>';
                                                out += '<p>' + '是否运载危险品:' + params.data.YZWXP + '</p>';
                                                out += '<p>' + '初次录入时间:' + params.data.CCLRSJ + '</p>';
                                                out += '<p>' + '记录类型:' + params.data.JLLX + '</p>';
                                                out += '<p>' + '上传时间:' + params.data.SCSJD + '</p>';
                                                out += '<p>' + '经办人:' + params.data.JBR + '</p>';
                                                // out += '<p>' + '更新时间:' + params.data.GXGJ + '</p>';
                                                out += '<p>' + '所属中队:' + params.data.SSZD + '</p>';
                                                out += '<p>' + '公路行政等级:' + params.data.GLXZDJ + '</p>';
                                                out += '<p>' + '上报:' + params.data.SB + '</p>';
                                                out += '<p>' + '管理部门:' + params.data.GLBM + '</p>';
                                                out += '<p>' + '办案单位:' + params.data.BADW + '</p>';
                                                // out += '<p>' + '校验位:' + params.data.JYM + '</p>';
                                                out += '<p>' + '是否典型事故:' + params.data.SFDXSG + '</p>';
                                                out += '<p>' + '道路安全隐患等级:' + params.data.DLAQYHDJ + '</p>';
                                                out += '<p>' + '当事人总数:' + params.data.DSRZS + '</p>';
                                                out += '<p>' + '发证机关:' + params.data.FSJG + '</p>';


                                                // }
                                                return out;
                                            }
                                        },

                                        series: [{
                                            // 类型
                                            type: 'graph',
                                            // 力导图布局
                                            layout: 'force',
                                            // 开启平移与缩放
                                            roam: true,

                                            symbolSize: (value, params) => {
                                                return value;
                                            },
                                            // 是否可拖拽
                                            draggable: true,
                                            // 节点数据
                                            data: datas,

                                            force: {
                                                edgeLength: 200,
                                                repulsion: 300,
                                                // gravity: 0.1
                                            },
                                            // 关系
                                            links: links,

                                        }]
                                    };
                                    myChart.setOption(option);
                                }
                            })
                        }
                    }
                };
                var CtorCalendar = Vue.extend(MainCalendar);
                var calendar = new CtorCalendar().$mount('#calendar');

                var MainSlide = {
                    data() {
                        return {
                            value: 42
                        }
                    },
                    methods: {
                        formatTooltip(val) {
                            return val / 100;
                        },
                        graph: function () {
                            links = [];
                            var matrix = new Array(datas.length);
                            for (var i = 0; i < matrix.length; i++) {
                                matrix[i] = new Array(datas.length);
                            }
                            for (var i = 0; i < datas.length; i++) {
                                for (var j = 0; j < datas.length; j++) {
                                    if (i === j) {
                                        matrix[i][j] = 0;
                                    }
                                    else {
                                        var dis = dissimilarity(datas[i], datas[j]);
                                        matrix[i][j] = dis;
                                        // datas[i].value += 3;
                                        // datas[j].value += 3;
                                        if (dis < slide.value / 100) {
                                            links.push({
                                                source: datas[i].name,
                                                target: datas[j].name,
                                            });
                                        }
                                    }
                                }
                            }
                            var myChart = echarts.init(
                                document.getElementById('graph')
                            )
                            var option = {
                                tooltip: {
                                    show: true,
                                    trigger: 'item',
                                    formatter(params) {
                                        console.log(params);
                                        var out = '';
                                        // for (p in params) {
                                        out += '<p>' + '事故编号:' + params.data.SGBH + '</p>';
                                        out += '<p>' + '行政登记:' + params.data.XZQH + '</p>';
                                        out += '<p>' + '登记编号:' + params.data.DJBH + '</p>';
                                        out += '<p>' + '开始勘察时间:' + params.data.KSKCSJ + '</p>';
                                        out += '<p>' + '结束勘察时间:' + params.data.JSKCSJ + '</p>';
                                        out += '<p>' + '路号:' + params.data.LH + '</p>';
                                        out += '<p>' + '路名:' + params.data.LM + '</p>';
                                        out += '<p>' + '公里数:' + params.data.GLS + '</p>';
                                        out += '<p>' + '米数:' + params.data.MS + '</p>';
                                        out += '<p>' + '绝对位置:' + params.data.JDWZ + '</p>';
                                        out += '<p>' + '事故地点:' + params.data.SGDD + '</p>';
                                        out += '<p>' + '在道路横断面位置:' + params.data.ZHDMWZ + '</p>';
                                        out += '<p>' + '交通信号方式:' + params.data.JTXHFS + '</p>';
                                        out += '<p>' + '路侧防护设施类型:' + params.data.FHSSLX + '</p>';
                                        out += '<p>' + '道路物理隔离:' + params.data.DLWLGL + '</p>';
                                        out += '<p>' + '路面状况:' + params.data.LMZK + '</p>';
                                        out += '<p>' + '路表情况:' + params.data.LBQK + '</p>';
                                        out += '<p>' + '路面结构:' + params.data.LMJG + '</p>';
                                        out += '<p>' + '路口路段类型:' + params.data.LKLDLX + '</p>';
                                        out += '<p>' + '道路线型:' + params.data.DLXX + '</p>';
                                        out += '<p>' + '道路类型:' + params.data.DLLX + '</p>';
                                        out += '<p>' + '勘察人1:' + params.data.KCR1 + '</p>';
                                        out += '<p>' + '勘察人2:' + params.data.KCR2 + '</p>';
                                        out += '<p>' + '办案人1:' + params.data.BAR1 + '</p>';
                                        out += '<p>' + '办案人2:' + params.data.BAR2 + '</p>';
                                        out += '<p>' + '当场死亡人数:' + params.data.SWRS + '</p>';
                                        out += '<p>' + '失踪人数:' + params.data.SZRS + '</p>';
                                        out += '<p>' + '重伤人数:' + params.data.ZSRS + '</p>';
                                        out += '<p>' + '轻伤人数:' + params.data.QSRS + '</p>';
                                        out += '<p>' + '受伤人数:' + params.data.SSRS + '</p>';
                                        out += '<p>' + '机动车数量:' + params.data.JDCSL + '</p>';
                                        out += '<p>' + '行人数量:' + params.data.XRSL + '</p>';
                                        out += '<p>' + '直接财产损失:' + params.data.ZJCCSS + '</p>';
                                        out += '<p>' + '事故类型:' + params.data.SGLX + '</p>';
                                        out += '<p>' + '事故初查原因分类:' + params.data.CCYYFL + '</p>';
                                        out += '<p>' + '事故认定原因分类:' + params.data.RDYYFL + '</p>';
                                        out += '<p>' + '简要案情:' + params.data.JYAQ + '</p>';
                                        out += '<p>' + '天气:' + params.data.TQ + '</p>';
                                        out += '<p>' + '能见度:' + params.data.NJD + '</p>';
                                        out += '<p>' + '现场:' + params.data.XC + '</p>';
                                        out += '<p>' + '事故形态:' + params.data.SGXT + '</p>';
                                        out += '<p>' + '车辆间事故:' + params.data.CLJSG + '</p>';
                                        out += '<p>' + '地形:' + params.data.DX + '</p>';
                                        out += '<p>' + '照明条件:' + params.data.ZMTJ + '</p>';
                                        out += '<p>' + '是否运载危险品:' + params.data.YZWXP + '</p>';
                                        out += '<p>' + '初次录入时间:' + params.data.CCLRSJ + '</p>';
                                        out += '<p>' + '记录类型:' + params.data.JLLX + '</p>';
                                        out += '<p>' + '上传时间:' + params.data.SCSJD + '</p>';
                                        out += '<p>' + '经办人:' + params.data.JBR + '</p>';
                                        // out += '<p>' + '更新时间:' + params.data.GXGJ + '</p>';
                                        out += '<p>' + '所属中队:' + params.data.SSZD + '</p>';
                                        out += '<p>' + '公路行政等级:' + params.data.GLXZDJ + '</p>';
                                        out += '<p>' + '上报:' + params.data.SB + '</p>';
                                        out += '<p>' + '管理部门:' + params.data.GLBM + '</p>';
                                        out += '<p>' + '办案单位:' + params.data.BADW + '</p>';
                                        // out += '<p>' + '校验位:' + params.data.JYM + '</p>';
                                        out += '<p>' + '是否典型事故:' + params.data.SFDXSG + '</p>';
                                        out += '<p>' + '道路安全隐患等级:' + params.data.DLAQYHDJ + '</p>';
                                        out += '<p>' + '当事人总数:' + params.data.DSRZS + '</p>';
                                        out += '<p>' + '发证机关:' + params.data.FSJG + '</p>';
                                        // }
                                        return out;
                                    }
                                },
                                series: [{
                                    type: 'graph',
                                    layout: 'force',
                                    roam: true,
                                    symbolSize: (value, params) => {
                                        return value;
                                    },
                                    draggable: true,
                                    data: datas,
                                    force: {
                                        edgeLength: 200,
                                        repulsion: 300,
                                    },
                                    links: links,
                                }]
                            };
                            myChart.setOption(option);
                        }
                    },
                    watch: {
                        value: function () {
                            links = [];
                            var matrix = new Array(datas.length);
                            for (var i = 0; i < matrix.length; i++) {
                                matrix[i] = new Array(datas.length);
                            }
                            for (var i = 0; i < datas.length; i++) {
                                for (var j = 0; j < datas.length; j++) {
                                    if (i === j) {
                                        matrix[i][j] = 0;
                                    }
                                    else {
                                        var dis = dissimilarity(datas[i], datas[j]);
                                        matrix[i][j] = dis;
                                        // datas[i].value += 3;
                                        // datas[j].value += 3;
                                        if (dis < slide.value / 100) {
                                            links.push({
                                                source: datas[i].name,
                                                target: datas[j].name,
                                            });
                                        }
                                    }
                                }
                            }
                            var myChart = echarts.init(
                                document.getElementById('graph')
                            )
                            var option = {
                                tooltip: {
                                    show: true,
                                    trigger: 'item',
                                    formatter(params) {
                                        console.log(params);
                                        var out = '';
                                        // for (p in params) {
                                        out += '<p>' + '事故编号:' + params.data.SGBH + '</p>';
                                        out += '<p>' + '行政登记:' + params.data.XZQH + '</p>';
                                        out += '<p>' + '登记编号:' + params.data.DJBH + '</p>';
                                        out += '<p>' + '开始勘察时间:' + params.data.KSKCSJ + '</p>';
                                        out += '<p>' + '结束勘察时间:' + params.data.JSKCSJ + '</p>';
                                        out += '<p>' + '路号:' + params.data.LH + '</p>';
                                        out += '<p>' + '路名:' + params.data.LM + '</p>';
                                        out += '<p>' + '公里数:' + params.data.GLS + '</p>';
                                        out += '<p>' + '米数:' + params.data.MS + '</p>';
                                        out += '<p>' + '绝对位置:' + params.data.JDWZ + '</p>';
                                        out += '<p>' + '事故地点:' + params.data.SGDD + '</p>';
                                        out += '<p>' + '在道路横断面位置:' + params.data.ZHDMWZ + '</p>';
                                        out += '<p>' + '交通信号方式:' + params.data.JTXHFS + '</p>';
                                        out += '<p>' + '路侧防护设施类型:' + params.data.FHSSLX + '</p>';
                                        out += '<p>' + '道路物理隔离:' + params.data.DLWLGL + '</p>';
                                        out += '<p>' + '路面状况:' + params.data.LMZK + '</p>';
                                        out += '<p>' + '路表情况:' + params.data.LBQK + '</p>';
                                        out += '<p>' + '路面结构:' + params.data.LMJG + '</p>';
                                        out += '<p>' + '路口路段类型:' + params.data.LKLDLX + '</p>';
                                        out += '<p>' + '道路线型:' + params.data.DLXX + '</p>';
                                        out += '<p>' + '道路类型:' + params.data.DLLX + '</p>';
                                        out += '<p>' + '勘察人1:' + params.data.KCR1 + '</p>';
                                        out += '<p>' + '勘察人2:' + params.data.KCR2 + '</p>';
                                        out += '<p>' + '办案人1:' + params.data.BAR1 + '</p>';
                                        out += '<p>' + '办案人2:' + params.data.BAR2 + '</p>';
                                        out += '<p>' + '当场死亡人数:' + params.data.SWRS + '</p>';
                                        out += '<p>' + '失踪人数:' + params.data.SZRS + '</p>';
                                        out += '<p>' + '重伤人数:' + params.data.ZSRS + '</p>';
                                        out += '<p>' + '轻伤人数:' + params.data.QSRS + '</p>';
                                        out += '<p>' + '受伤人数:' + params.data.SSRS + '</p>';
                                        out += '<p>' + '机动车数量:' + params.data.JDCSL + '</p>';
                                        out += '<p>' + '行人数量:' + params.data.XRSL + '</p>';
                                        out += '<p>' + '直接财产损失:' + params.data.ZJCCSS + '</p>';
                                        out += '<p>' + '事故类型:' + params.data.SGLX + '</p>';
                                        out += '<p>' + '事故初查原因分类:' + params.data.CCYYFL + '</p>';
                                        out += '<p>' + '事故认定原因分类:' + params.data.RDYYFL + '</p>';
                                        out += '<p>' + '简要案情:' + params.data.JYAQ + '</p>';
                                        out += '<p>' + '天气:' + params.data.TQ + '</p>';
                                        out += '<p>' + '能见度:' + params.data.NJD + '</p>';
                                        out += '<p>' + '现场:' + params.data.XC + '</p>';
                                        out += '<p>' + '事故形态:' + params.data.SGXT + '</p>';
                                        out += '<p>' + '车辆间事故:' + params.data.CLJSG + '</p>';
                                        out += '<p>' + '地形:' + params.data.DX + '</p>';
                                        out += '<p>' + '照明条件:' + params.data.ZMTJ + '</p>';
                                        out += '<p>' + '是否运载危险品:' + params.data.YZWXP + '</p>';
                                        out += '<p>' + '初次录入时间:' + params.data.CCLRSJ + '</p>';
                                        out += '<p>' + '记录类型:' + params.data.JLLX + '</p>';
                                        out += '<p>' + '上传时间:' + params.data.SCSJD + '</p>';
                                        out += '<p>' + '经办人:' + params.data.JBR + '</p>';
                                        // out += '<p>' + '更新时间:' + params.data.GXGJ + '</p>';
                                        out += '<p>' + '所属中队:' + params.data.SSZD + '</p>';
                                        out += '<p>' + '公路行政等级:' + params.data.GLXZDJ + '</p>';
                                        out += '<p>' + '上报:' + params.data.SB + '</p>';
                                        out += '<p>' + '管理部门:' + params.data.GLBM + '</p>';
                                        out += '<p>' + '办案单位:' + params.data.BADW + '</p>';
                                        // out += '<p>' + '校验位:' + params.data.JYM + '</p>';
                                        out += '<p>' + '是否典型事故:' + params.data.SFDXSG + '</p>';
                                        out += '<p>' + '道路安全隐患等级:' + params.data.DLAQYHDJ + '</p>';
                                        out += '<p>' + '当事人总数:' + params.data.DSRZS + '</p>';
                                        out += '<p>' + '发证机关:' + params.data.FSJG + '</p>';
                                        // }
                                        return out;
                                    }
                                },
                                series: [{
                                    type: 'graph',
                                    layout: 'force',
                                    roam: true,
                                    symbolSize: (value, params) => {
                                        return value;
                                    },
                                    draggable: true,
                                    data: datas,
                                    force: {
                                        edgeLength: 200,
                                        repulsion: 300,
                                    },
                                    links: links,
                                }]
                            };
                            myChart.setOption(option);
                        }
                    }
                }
                var CtorSlide = Vue.extend(MainSlide)
                var slide = new CtorSlide().$mount('#slide')

                //下面是所有的函数和表
                CATAGORY_SIMILARITY_LIST = new Array("XZQH ", "DJBH ", "KSKCSJ ", "JSKCSJ ", "LH ", "LM ", "GLS ", "MS ", "JDWZ ", "SGDD ", "JTXHFS  ", "FHSSLX ", "DLWLGL ", "LMZK ", "LBQK ", "LMJG ");
                NUMERICAL_SIMILARITY_LIST = new Array("MS", "TQ", "NJD");
                MAX_DATE = new Date('2020-06-09 17:10:00');
                MIN_DATE = new Date('2020-04-10 17:15:51');
                MIN_FKJE = 0;
                MAX_FKJE = 50000;
                MIN_WFJFS = 0;
                MAX_WFJFS = 12;

                function dissimilarity(violation1, violation2) {
                    //param: 事件的Object
                    //return: 两个事件的相异度，取值从0到1
                    //denominator: 维度
                    //numerator: 不同值的数目
                    var denominator = 0;
                    var numerator = 0;
                    for (var i = 0; i < CATAGORY_SIMILARITY_LIST.length; i++) {
                        denominator++;
                        violation1[CATAGORY_SIMILARITY_LIST[i]] === violation2[CATAGORY_SIMILARITY_LIST[i]] ? numerator += 0 : numerator += 1;
                    }
                    denominator += NUMERICAL_SIMILARITY_LIST.length;
                    var d1 = new Date(violation1.WFSJ);
                    var d2 = new Date(violation2.WFSJ);
                    numerator += Math.abs(d1 - d2) / Math.abs(MIN_DATE - MAX_DATE);
                    numerator += Math.abs(parseInt(violation1.FKJE) - parseInt(violation2.FKJE)) / Math.abs(MIN_FKJE - MAX_FKJE);
                    numerator += Math.abs(parseInt(violation1.WFJFS) - parseInt(violation2.WFJFS)) / Math.abs(MIN_WFJFS - MAX_WFJFS);
                    return numerator / denominator;
                }

                function getObject(d) {
                    var result = new Array();
                    //console.log(d)
                    for (var i = 0; i < d["SGBH"].length; i++) {
                        var one = new Object();
                        one.SGBH=d['SGBH'][i];
                        one.XZQH=d['XZQH'][i];
                        one.DJBH=d['DJBH'][i];
                        one.KSKCSJ=d['KSKCSJ'][i];
                        one.JSKCSJ=d['JSKCSJ'][i];
                        one.LH=d['LH'][i];
                        one.LM=d['LM'][i];
                        one.GLS=d['GLS'][i];
                        one.MS=d['MS'][i];
                        one.JDWZ=d['JDWZ'][i];
                        one.SGDD=d['SGDD'][i];
                        one.ZHDMWZ=d['ZHDMWZ'][i];
                        one.JTXHFS=d['JTXHFS'][i];
                        one.FHSSLX=d['FHSSLX'][i];
                        one.DLWLGL=d['DLWLGL'][i];
                        one.LMZK=d['LMZK'][i];
                        one.LBQK=d['LBQK'][i];
                        one.LMJG=d['LMJG'][i];


                        result.push(one);
                    }
                    return result;
                }
            </script>

        </div>
    </div>


</div>

</div>


<script src="../../static/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../../static/assets/plugins/toaster/toastr.min.js"></script>
<script src="../../static/assets/plugins/slimscrollbar/jquery.slimscroll.min.js"></script>
<script src="../../static/assets/plugins/charts/Chart.min.js"></script>
<script src="../../static/assets/plugins/ladda/spin.min.js"></script>
<script src="../../static/assets/plugins/ladda/ladda.min.js"></script>
<script src="../../static/assets/plugins/jquery-mask-input/jquery.mask.min.js"></script>
<script src="../../static/assets/plugins/select2/js/select2.min.js"></script>
<script src="../../static/assets/plugins/jvectormap/jquery-jvectormap-2.0.3.min.js"></script>
<script src="../../static/assets/plugins/jvectormap/jquery-jvectormap-world-mill.js"></script>
<script src="../../static/assets/plugins/daterangepicker/moment.min.js"></script>
<script src="../../static/assets/plugins/daterangepicker/daterangepicker.js"></script>
<script src="../../static/assets/plugins/jekyll-search.min.js"></script>
<script src="../../static/assets/js/sleek.js"></script>
<script src="../../static/assets/js/chart.js"></script>
<script src="../../static/assets/js/date-range.js"></script>
<script src="../../static/assets/js/map.js"></script>
<script src="../../static/assets/js/custom.js"></script>


<!--<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>-->


</body>

</html>