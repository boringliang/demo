<!DOCTYPE html>
<html lang="en" dir="ltr" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>Sleek - Admin Dashboard Template</title>

    <!-- GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500|Poppins:400,500,600,700|Roboto:400,500"
          rel="stylesheet"/>
    <link href="https://cdn.materialdesignicons.com/3.0.39/css/materialdesignicons.min.css" rel="stylesheet"/>

    <!-- PLUGINS CSS STYLE -->
    <link href="../../static/assets/plugins/toaster/toastr.min.css" rel="stylesheet"/>
    <link href="../../static/assets/plugins/nprogress/nprogress.css" rel="stylesheet"/>
    <link href="../../static/assets/plugins/flag-icons/css/flag-icon.min.css" rel="stylesheet"/>
    <link href="../../static/assets/plugins/jvectormap/jquery-jvectormap-2.0.3.css" rel="stylesheet"/>
    <link href="../../static/assets/plugins/ladda/ladda.min.css" rel="stylesheet"/>
    <link href="../../static/assets/plugins/select2/css/select2.min.css" rel="stylesheet"/>
    <link href="../../static/assets/plugins/daterangepicker/daterangepicker.css" rel="stylesheet"/>

    <!-- SLEEK CSS -->
    <link id="sleek-css" rel="stylesheet" href="../../static/assets/css/sleek.css"/>


    <!-- FAVICON -->
    <link href="../../static/assets/img/favicon.png" rel="shortcut icon"/>

    <!--
      HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries
    -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="../../static/assets/plugins/nprogress/nprogress.js"></script>
    <script src="../../static/assets/d3.js" charset="utf-8"></script>
    <script src="../../static/assets/d3.min.js" charset="utf-8"></script>
    <script src="../../static/assets/echarts.min.js"></script>


    <script src="../../static/assets/plugins/jquery/jquery.min.js"></script>
    <script src="../../static/assets/widgets/code/jquery.calendar.js"></script>
    <script src="../../static/assets/widgets/code/jquery.popup.js"></script>
    <script src="../../static/assets/LYWutils_traffic_jam.js"></script>
    <script src="../../static/assets/sidebar.js"></script>
    <style type="text/css">
        .calendar1{
            width:350px;
            margin:0 auto 20px;
            color:#333;
        }
        .calendar1 table{
            width:100%;
            table-layout:fixed;
            border-collapse: collapse;
            border-spacing: 0;
            text-align: center;
        }
        .calendar1 caption{
            line-height: 30px;
            text-align: center;
            border-bottom: 1px solid #ebebeb;
            margin-bottom: 5px;
        }
        .calendar1 caption span{
            margin: 0 10px;
        }
        .calendar1 caption a{
            color:#666;
            margin:0 5px;
            text-decoration: none;
        }
        .calendar1 td,.calendar1 th{
            height: 30px;
            line-height: 30px;
            text-align: center;
        }
        .calendar1 td span{
            display: block;
            width: 30px;
            margin: 0 auto;
            cursor: pointer;
        }
        .calendar1 .widget-back{
            float: right;
        }
        .calendar1 .widget-today span{
            font-weight: bold;
        }
        .calendar1 .widget-disabled span{
            color:#999;
        }
        .calendar1 .widget-highlight span{
            background: #f7b82e;
            color:#fff;
            border-radius: 30px;
        }
        .calendar1 .widget-active span{
            background: #39c;
            color:#fff;
            border-radius: 30px;
        }
    </style>

    <style type="text/css">
        .calendar2{
            width:350px;
            margin:0 auto 20px;
            color:#333;
        }
        .calendar2 table{
            width:100%;
            table-layout:fixed;
            border-collapse: collapse;
            border-spacing: 0;
            text-align: center;
        }
        .calendar2 caption{
            line-height: 30px;
            text-align: center;
            border-bottom: 1px solid #ebebeb;
            margin-bottom: 5px;
        }
        .calendar2 caption span{
            margin: 0 10px;
        }
        .calendar2 caption a{
            color:#666;
            margin:0 5px;
            text-decoration: none;
        }
        .calendar2 td,.calendar2 th{
            height: 30px;
            line-height: 30px;
            text-align: center;
        }
        .calendar2 td span{
            display: block;
            width: 30px;
            margin: 0 auto;
            cursor: pointer;
        }
        .calendar2 .widget-back{
            float: right;
        }
        .calendar2 .widget-today span{
            font-weight: bold;
        }
        .calendar2 .widget-disabled span{
            color:#999;
        }
        .calendar2 .widget-highlight span{
            background: #f7b82e;
            color:#fff;
            border-radius: 30px;
        }
        .calendar2 .widget-active span{
            background: #39c;
            color:#fff;
            border-radius: 30px;
        }
    </style>
    <style type="text/css">
        .calendar11{
            width:350px;
            margin:0 auto 20px;
            color:#333;
        }
        .calendar11 table{
            width:100%;
            table-layout:fixed;
            border-collapse: collapse;
            border-spacing: 0;
            text-align: center;
        }
        .calendar11 caption{
            line-height: 30px;
            text-align: center;
            border-bottom: 1px solid #ebebeb;
            margin-bottom: 5px;
        }
        .calendar11 caption span{
            margin: 0 10px;
        }
        .calendar11 caption a{
            color:#666;
            margin:0 5px;
            text-decoration: none;
        }
        .calendar11 td,.calendar11 th{
            height: 30px;
            line-height: 30px;
            text-align: center;
        }
        .calendar11 td span{
            display: block;
            width: 30px;
            margin: 0 auto;
            cursor: pointer;
        }
        .calendar11 .widget-back{
            float: right;
        }
        .calendar11 .widget-today span{
            font-weight: bold;
        }
        .calendar11 .widget-disabled span{
            color:#999;
        }
        .calendar11 .widget-highlight span{
            background: #f7b82e;
            color:#fff;
            border-radius: 30px;
        }
        .calendar11 .widget-active span{
            background: #39c;
            color:#fff;
            border-radius: 30px;
        }
    </style>

    <style type="text/css">
        .calendar111{
            width:350px;
            margin:0 auto 20px;
            color:#333;
        }
        .calendar111 table{
            width:100%;
            table-layout:fixed;
            border-collapse: collapse;
            border-spacing: 0;
            text-align: center;
        }
        .calendar111 caption{
            line-height: 30px;
            text-align: center;
            border-bottom: 1px solid #ebebeb;
            margin-bottom: 5px;
        }
        .calendar111 caption span{
            margin: 0 10px;
        }
        .calendar111 caption a{
            color:#666;
            margin:0 5px;
            text-decoration: none;
        }
        .calendar111 td,.calendar111 th{
            height: 30px;
            line-height: 30px;
            text-align: center;
        }
        .calendar111 td span{
            display: block;
            width: 30px;
            margin: 0 auto;
            cursor: pointer;
        }
        .calendar111 .widget-back{
            float: right;
        }
        .calendar111 .widget-today span{
            font-weight: bold;
        }
        .calendar111 .widget-disabled span{
            color:#999;
        }
        .calendar111 .widget-highlight span{
            background: #f7b82e;
            color:#fff;
            border-radius: 30px;
        }
        .calendar111 .widget-active span{
            background: #39c;
            color:#fff;
            border-radius: 30px;
        }
    </style>

</head>


<body class="sidebar-fixed sidebar-dark header-light header-fixed" id="body">
<script>
    NProgress.configure({showSpinner: false});
    NProgress.start();
</script>

<div class="mobile-sticky-body-overlay"></div>

<div class="wrapper">

    <!--
====================================
——— LEFT SIDEBAR WITH FOOTER
=====================================
-->


    <div class="page-wrapper">
        <!-- Header -->
        <header class="main-header " id="header">
            <nav class="navbar navbar-static-top navbar-expand-lg">
                <!-- Sidebar toggle button -->
                <button id="sidebar-toggler" class="sidebar-toggle">
                    <span class="sr-only">Toggle navigation</span>
                </button>
                <!-- search form -->
                <div class="search-form d-none d-lg-inline-block">
                    <div class="input-group">
                        <button type="button" name="search" id="search-btn" class="btn btn-flat">
                            <i class="mdi mdi-magnify"></i>
                        </button>
                        <input type="text" name="query" id="search-input" class="form-control"
                               placeholder="'button', 'chart' etc." autofocus autocomplete="off"/>
                    </div>
                    <div id="search-results-container">
                        <ul id="search-results"></ul>
                    </div>
                </div>

                <div class="navbar-right ">
                    <ul class="nav navbar-nav">
                        <!-- Github Link Button -->
                        <li class="github-link mr-3">
                            <a class="btn btn-outline-secondary btn-sm"
                               href="https://github.com/tafcoder/sleek-dashboard"
                               target="_blank">
                                <span class="d-none d-md-inline-block mr-2">Source Code</span>
                                <i class="mdi mdi-github-circle"></i>
                            </a>

                        </li>
                        <li class="dropdown notifications-menu">
                            <button class="dropdown-toggle" data-toggle="dropdown">
                                <i class="mdi mdi-bell-outline"></i>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-right">
                                <li class="dropdown-header">You have 5 notifications</li>
                                <li>
                                    <a href="#">
                                        <i class="mdi mdi-account-plus"></i> New user registered
                                        <span class=" font-size-12 d-inline-block float-right"><i
                                                class="mdi mdi-clock-outline"></i> 10
                        AM</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="mdi mdi-account-remove"></i> User deleted
                                        <span class=" font-size-12 d-inline-block float-right"><i
                                                class="mdi mdi-clock-outline"></i> 07
                        AM</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="mdi mdi-chart-areaspline"></i> Sales report is ready
                                        <span class=" font-size-12 d-inline-block float-right"><i
                                                class="mdi mdi-clock-outline"></i> 12
                        PM</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="mdi mdi-account-supervisor"></i> New client
                                        <span class=" font-size-12 d-inline-block float-right"><i
                                                class="mdi mdi-clock-outline"></i> 10
                        AM</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="mdi mdi-server-network-off"></i> Server overloaded
                                        <span class=" font-size-12 d-inline-block float-right"><i
                                                class="mdi mdi-clock-outline"></i> 05
                        AM</span>
                                    </a>
                                </li>
                                <li class="dropdown-footer">
                                    <a class="text-center" href="#"> View All </a>
                                </li>
                            </ul>
                        </li>
                        <!-- User Account -->
                        <li class="dropdown user-menu">
                            <button href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
                                <img src="../../static/assets/img/user/user.png" class="user-image" alt="User Image"/>
                                <span class="d-none d-lg-inline-block">Abdus Salam</span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-right">
                                <!-- User image -->
                                <li class="dropdown-header">
                                    <img src="../../static/assets/img/user/user.png" class="img-circle"
                                         alt="User Image"/>
                                    <div class="d-inline-block">
                                        Abdus Salam <small class="pt-1">abdus@gmail.com</small>
                                    </div>
                                </li>

                                <li>
                                    <a href="profile.html">
                                        <i class="mdi mdi-account"></i> My Profile
                                    </a>
                                </li>
                                <li>
                                    <a href="email-inbox.html">
                                        <i class="mdi mdi-email"></i> Message
                                    </a>
                                </li>
                                <li>
                                    <a href="#"> <i class="mdi mdi-diamond-stone"></i> Projects </a>
                                </li>
                                <li>
                                    <a href="#"> <i class="mdi mdi-settings"></i> Account Setting </a>
                                </li>

                                <li class="dropdown-footer">
                                    <a href="signin.html"> <i class="mdi mdi-logout"></i> Log Out </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </nav>


        </header>



        <!--        <select id="testmul" multiple="multiple" size="3">-->
        <!--            <option value="1">1</option>-->
        <!--            <option value="2">2</option>-->
        <!--            <option value="3">3</option>-->
        <!--            <option value="4">4</option>-->
        <!--            <option value="5">5</option>-->
        <!--            <option value="6">6</option>-->
        <!--        </select>-->

        <!--        <button id="testbutton">button</button>-->
        <!--        <script>-->
        <!--            $(document).ready(function() {-->
        <!--                $('#testbutton').click(function() {-->
        <!--                    alert($('#testmul').val());-->
        <!--                })-->
        <!--            })-->
        <!--        </script>-->
        <!--        <p>this is a ${test}</p>-->
        <!--      </div>-->


        <div class="content-wrapper">
            <div class="content">

                <div class="add_one_selection">
                    <button>增加一个查询</button>
                    <script>
                        var tables = [
                            // "LRX.TRAFFIC_STATISTICS",
                            // "LRX.BURST_EVENT",
                            "LRX.MONITOR_SECTION",
                            // "LRX.ANLYS_SECTION_COMPUTE_DAY",
                            "LRX.SECTION_COMPUTER_HOUR",
                            "LRX.SECTION_JAM_LENGTH",
                            "LRX.ANLYS_GS_SECTION_COMPUTE",
                            // "SECTION_STATUS_DATA",
                            // "LRX.ANLYS_NATURE_SECTION",
                            // "LRX.ANLYS_SECTION_COMPUTE_DAY",
                            //下面的是没有表注释的，不知道字段意思
                            // "TRAFFIC_STATUS_RESULT",
                            // "LRX.TRAFFIC_INFO",
                            // "INDEX_ROAD_INDEX"
                        ]
                        var numbers = 0;
                        $(document).ready(function() {
                            $(".add_one_selection button").click(function() {
                                if (numbers <= 0) {
                                    numbers++;
                                    $(".selections").append('<div class="selection' + numbers + '">\n' +
                                        '        </div>');
                                    $(".selection" + numbers).append('<button id="button' + numbers + '">\n' +
                                        '        提交</button>');
                                    $(".selection" + numbers).append('<select id="table' + numbers + '">\n' +
                                        '        </select>');

                                    for (var i = 0; i < tables.length; i++) {
                                        $(".selections #table" + numbers).append('<option value="' + tables[i] + '">' + tables[i] + '</option>');
                                    }
                                }
                            });
                        });
                    </script>

                    <script>
                        $(document).ready(function() {
                            $('.selections').on('click', '#button1', function() {
                                var table = $('#table1').val();
                                var type = $('#type1').val();
                                var field1 = $('#field1').val();
                                var field11 = $('#field11').val();
                                var field111 = $('#field111').val();
                                var confine11 = $('#confine11').val();
                                var confine111 = $('#confine111').val();
                                // alert(confine11 + ' ' + confine111);
                                // alert(field11 + ' ' + field111);
                                if ( (field11.match('time') == null) && (field11.match('TIME') == null) ) {
                                    confine11 = $('#confine11').val();
                                }
                                else {
                                    confine11 = new Array();
                                    confine11[0] = calendar11_begin['year'] + '-' + calendar11_begin['month'] + '-' + calendar11_begin['day'];
                                    confine11[1] = calendar11_end['year'] + '-' + calendar11_end['month'] + '-' + calendar11_end['day'];
                                }
                                if ( (field111.match('time') == null) && (field111.match('TIME') == null) ) {
                                    confine111 = $('#confine111').val();
                                }
                                else {
                                    confine111= new Array();
                                    confine111[0] = calendar111_begin['year'] + '-' + calendar111_begin['month'] + '-' + calendar111_begin['day'];
                                    confine111[1] = calendar111_end['year'] + '-' + calendar111_end['month'] + '-' + calendar111_end['day'];
                                }
                                // alert(confine11);
                                // alert(confine111);
                                $.ajax({
                                    url: "/creat_chart_data",
                                    type: "POST",
                                    data: {
                                        "table": table.toString(),
                                        "type": type.toString(),
                                        "field1": field1.toString(),
                                        "field11": field11.toString(),
                                        "field111": field111.toString(),
                                        "confine11": confine11.toString(),
                                        "confine111": confine111.toString()
                                    },
                                    success: function(data) {
                                        if ((data["type"][0] == "pie") || (data["type"][0] == "bar")) {
                                            alert(data["id"][0]);
                                            create_chart(data["y_name"][0], data["y_name"][0], Object.keys(getMap(data["y_value"])), Object.values(getMap(data["y_value"])), data["type"][0], data["id"][0]);
                                        }
                                        else{
                                            alert(data["id"][0]);
                                            create_chart(data["x_name"][0], data["y_name"][0], data["x_value"], data["y_value"], data["type"][0], data["id"][0]);
                                        }
                                    }
                                })
                            })
                        })

                        $(document).ready(function() {
                            $('.selections').on('click', '#button2', function() {
                                var table = $('#table2').val();
                                var type = $('#type2').val();
                                var field1 = $('#field2').val();
                                var field11 = $('#field22').val();
                                var field111 = $('#field222').val();
                                var confine11 = $('#confine22').val();
                                var confine111 = $('#confine222').val();
                                // alert(confine11 + ' ' + confine111);
                                // alert(field11 + ' ' + field111);
                                if ( (field11.match('time') == null) && (field11.match('TIME') == null) ) {
                                    confine11 = $('#confine11').val();
                                }
                                else {
                                    confine11 = new Array();
                                    confine11[0] = calendar22_begin['year'] + '-' + calendar22_begin['month'] + '-' + calendar22_begin['day'];
                                    confine11[1] = calendar22_end['year'] + '-' + calendar22_end['month'] + '-' + calendar22_end['day'];
                                }
                                if ( (field111.match('time') == null) && (field111.match('TIME') == null) ) {
                                    confine111 = $('#confine222').val();
                                }
                                else {
                                    confine111= new Array();
                                    confine111[0] = calendar222_begin['year'] + '-' + calendar222_begin['month'] + '-' + calendar222_begin['day'];
                                    confine111[1] = calendar222_end['year'] + '-' + calendar222_end['month'] + '-' + calendar222_end['day'];
                                }
                                // alert(confine11);
                                // alert(confine111);
                                $.ajax({
                                    url: "/creat_chart_data",
                                    type: "POST",
                                    data: {
                                        "table": table.toString(),
                                        "type": type.toString(),
                                        "field1": field1.toString(),
                                        "field11": field11.toString(),
                                        "field111": field111.toString(),
                                        "confine11": confine11.toString(),
                                        "confine111": confine111.toString()
                                    },
                                    success: function(data) {
                                        if ((data["type"][0] == "pie") || (data["type"][0] == "bar")) {
                                            alert(data["id"][0]);
                                            create_chart(data["y_name"][0], "numbers", Object.keys(getMap(data["y_value"])), Object.values(getMap(data["y_value"])), data["type"][0], data["id"][0]);
                                        }
                                        else{
                                            alert(data["id"][0]);
                                            create_chart(data["x_name"][0], data["y_name"][0], data["x_value"], data["y_value"], data["type"][0], data["id"][0]);
                                        }
                                    }
                                })
                            })
                        })
                    </script>

                </div>



                <!--                <script>-->
                <!--                    $(document).ready(function() {-->
                <!--                            $('.selections').on('click', '.trigger1', function () {-->
                <!--                                $('.calendar1').calendar({-->
                <!--                                    limitRange: [['20000101', '20300101']],-->
                <!--                                    isRange: true,-->
                <!--                                    'onSelect': function (range) {-->
                <!--                                    }-->
                <!--                                });-->
                <!--                                $('.popup1').popup({-->
                <!--                                    trigger: '.trigger1',-->
                <!--                                    triggerType: 'mouse',-->
                <!--                                    node: '.calendar1'-->
                <!--                                });-->
                <!--                            });-->
                <!--                        }-->
                <!--                    )-->
                <!--                    </script>-->
                <script id="about_table1">
                    $(document).ready(function() {
                        $(".selections").on('change', '#table1', function() {
                            $.ajax({
                                url: "/table1",
                                type: "POST",
                                data: {
                                    "table1": $('.selections #table1').val()
                                },
                                error: function(){
                                    alert("fail");
                                },
                                success: function(data) {
                                    $('.selections #type1').remove();
                                    $('.selections #field1').remove();
                                    $('.selections #field11').remove();
                                    $('.selections #field111').remove();
                                    $('.selections #confine11').remove();
                                    $('.selections #confine111').remove();
                                    $('.selections .popup1').remove();
                                    //还有后面的几个select都要在这里先remove一下
                                    $('.selections .selection1').append('<select id="type1">\n' +
                                        '                    <option>图型</option>\n' +
                                        '                    <option value="pie">pie</option>\n' +
                                        '                    <option value="bar">bar</option>\n' +
                                        '                    <option value="scatter">scatter</option>\n' +
                                        '                    <option value="line">line</option>\n' +
                                        '                </select>')

                                    $('.selections .selection1').append('<select id="field1"></select>');
                                    $('.selections #field1').append('<option>数据字段</option>');
                                    for (var i = 0; i < data.length; i++) {
                                        $('.selections #field1').append('<option value="' + data[i] + '">' + data[i] + '</option>');
                                    }

                                    $('.selections .selection1').append('<select id="field11"></select>');
                                    $('.selections #field11').append('<option value="0">条件字段1</option>');
                                    for (var i = 0; i < data.length; i++) {
                                        $('.selections #field11').append('<option value="' + data[i] + '">' + data[i] + '</option>');
                                    }


                                    $('.selections .selection1').append('<select id="field111"></select>');
                                    $('.selections #field111').append('<option value="0">条件字段2</option>');
                                    for (var i = 0; i < data.length; i++) {
                                        $('.selections #field111').append('<option value="' + data[i] + '">' + data[i] + '</option>');
                                    }


                                    // $('.selections .selection1').append('<div class="popup1">\n' +
                                    //     '                <button class="trigger1">calender</button>\n' +
                                    //     '                <div class="calendar1">\n' +
                                    //     '\n' +
                                    //     '                </div>\n' +
                                    //     '        </div>');

                                    $(document).ready(function() {
                                        $('.selections').on('change', '#field11', function() {
                                            $.ajax({
                                                url: "/table11",
                                                type: "POST",
                                                data: {
                                                    "field11": $('.selections #field11').val(),
                                                    "table1": $('.selections #table1').val()
                                                },
                                                success: function(data) {
                                                    if (data[0] == "time") {
                                                        $('.selections .trigger11').remove();
                                                        $('.selections .calendar11').remove();
                                                        $('.selections #confine11').remove();
                                                        $('.selections .selection1').append(
                                                            '                <button class="trigger11">calender</button>\n' +
                                                            '                <div class="calendar11">\n' +
                                                            '\n' +
                                                            '                </div>\n'
                                                        );
                                                        $('.calendar11').calendar({
                                                            limitRange: [['20140101', '20240101']],
                                                            isRange: true,
                                                            'onSelect': function (range) {
                                                                calendar11_begin = range[0];
                                                                calendar11_end = range[range.length-1];
                                                            }
                                                        });
                                                        $('.selections').popup({
                                                            trigger: '.trigger11',
                                                            triggerType: 'mouse',
                                                            node: '.calendar11'
                                                        });
                                                    }
                                                    else {
                                                        $('.selections #confine11').remove();
                                                        $('.selections .calendar11').remove();
                                                        $('.selections .trigger11').remove();
                                                        $('.selections .selection1').append('<select id="confine11" multiple="multiple" size="5"></select>');
                                                        for (var i = 0; i < data.length; i++) {
                                                            $('.selections #confine11').append('<option value="' + data[i] + '">' + data[i] + '</option>');
                                                        }
                                                    }
                                                }
                                            })
                                        })
                                    })
                                    $(document).ready(function() {
                                        $('.selections').on('change', '#field111', function() {
                                            $.ajax({
                                                url: "/table111",
                                                type: "POST",
                                                data: {
                                                    "field111": $('.selections #field111').val(),
                                                    "table1": $('.selections #table1').val()
                                                },
                                                success: function(data) {
                                                    if (data[0] == "time") {
                                                        $('.selections .trigger111').remove();
                                                        $('.selections #confine111').remove();
                                                        $('.selections .calendar111').remove();
                                                        $('.selections .selection1').append(
                                                            '                <button class="trigger111">calender</button>\n' +
                                                            '                <div class="calendar111">\n' +
                                                            '\n' +
                                                            '                </div>\n'
                                                        );
                                                        $('.calendar111').calendar({
                                                            limitRange: [['20140101', '20240101']],
                                                            isRange: true,
                                                            'onSelect': function (range) {
                                                                calendar111_begin = range[0];
                                                                calendar111_end = range[range.length-1];
                                                            }
                                                        });
                                                        $('.selections').popup({
                                                            trigger: '.trigger111',
                                                            triggerType: 'mouse',
                                                            node: '.calendar111'
                                                        });
                                                    }
                                                    else {
                                                        $('.selections #confine111').remove();
                                                        $('.selections .trigger111').remove();
                                                        $('.selections .calendar111').remove();
                                                        $('.selections .selection1').append('<select id="confine111" multiple="multiple" size="5"></select>');
                                                        for (var i = 0; i < data.length; i++) {
                                                            $('.selections #confine111').append('<option value="' + data[i] + '">' + data[i] + '</option>');
                                                        }
                                                    }
                                                }
                                            })
                                        })
                                    })
                                    // $('.selections').on('change', '#type1', function() {
                                    //     if ( ($('.selections #type1').val() == "bar") || ($('.selections #type1').val() == "pie")) {
                                    //         $('.selections #field11').remove();
                                    //     }
                                    //     if ( ($('.selections #type1').val() == "scatter") || ($('.selections #type1').val() == "line")) {
                                    //         $('.selections #field11').remove();
                                    //         $('.selections #field1').after('<select id="field11"></select>');
                                    //         for (var i = 0; i < data.length; i++) {
                                    //             $('.selections #field11').append('<option value="' + data[i] + '">' + data[i] + '</option>');
                                    //         }
                                    //     }
                                    // })
                                }
                            });
                        });
                    });
                </script>
                <script id="about_table2">
                    $(document).ready(function() {
                        $(".selections").on('change', '#table2', function() {
                            $.ajax({
                                url: "/table1",
                                type: "POST",
                                data: {
                                    "table1": $('.selections #table2').val()
                                },
                                success: function(data) {
                                    $('.selections #type2').remove();
                                    $('.selections #field2').remove();
                                    $('.selections #field22').remove();
                                    $('.selections #field222').remove();
                                    $('.selections .popup1').remove();
                                    //还有后面的几个select都要在这里先remove一下
                                    $('.selections .selection2').append('<select id="type2">\n' +
                                        '                    <option>图型</option>\n' +
                                        '                    <option value="pie">pie</option>\n' +
                                        '                    <option value="bar">bar</option>\n' +
                                        '                    <option value="scatter">scatter</option>\n' +
                                        '                    <option value="line">line</option>\n' +
                                        '                </select>')

                                    $('.selections .selection2').append('<select id="field2"></select>');
                                    for (var i = 0; i < data.length; i++) {
                                        $('.selections #field2').append('<option value="' + data[i] + '">' + data[i] + '</option>');
                                    }

                                    $('.selections .selection2').append('<select id="field22"></select>');
                                    $('.selections #field22').append('<option value="0">空选</option>');
                                    for (var i = 0; i < data.length; i++) {
                                        $('.selections #field22').append('<option value="' + data[i] + '">' + data[i] + '</option>');
                                    }


                                    $('.selections .selection2').append('<select id="field222"></select>');
                                    $('.selections #field222').append('<option value="0">空选</option>');
                                    for (var i = 0; i < data.length; i++) {
                                        $('.selections #field222').append('<option value="' + data[i] + '">' + data[i] + '</option>');
                                    }


                                    // $('.selections .selection1').append('<div class="popup1">\n' +
                                    //     '                <button class="trigger1">calender</button>\n' +
                                    //     '                <div class="calendar1">\n' +
                                    //     '\n' +
                                    //     '                </div>\n' +
                                    //     '        </div>');

                                    $(document).ready(function() {
                                        $('.selections').on('change', '#field22', function() {
                                            $.ajax({
                                                url: "/table11",
                                                type: "POST",
                                                data: {
                                                    "field11": $('.selections #field22').val(),
                                                    "field1": $('.selections #table2').val()
                                                },
                                                success: function(data) {
                                                    if (data[0] == "time") {
                                                        $('.selections .trigger22').remove();
                                                        $('.selections #confine22').remove();
                                                        $('.selections .selection2').append(
                                                            '                <button class="trigger22">calender</button>\n' +
                                                            '                <div class="calendar22">\n' +
                                                            '\n' +
                                                            '                </div>\n'
                                                        );
                                                        $('.calendar22').calendar({
                                                            limitRange: [['20140101', '20240101']],
                                                            isRange: true,
                                                            'onSelect': function (range) {
                                                                calendar22_begin = range[0];
                                                                calendar22_end = range[range.length-1];
                                                            }
                                                        });
                                                        $('.selections').popup({
                                                            trigger: '.trigger22',
                                                            triggerType: 'mouse',
                                                            node: '.calendar22'
                                                        });
                                                    }
                                                    else {
                                                        $('.selections #confine22').remove();
                                                        $('.selections .trigger22').remove();
                                                        $('.selections .selection2').append('<select id="confine22" multiple="multiple" size="5"></select>');
                                                        for (var i = 0; i < data.length; i++) {
                                                            $('.selections #confine22').append('<option value="' + data[i] + '">' + data[i] + '</option>');
                                                        }
                                                    }
                                                }
                                            })
                                        })
                                    })
                                    $(document).ready(function() {
                                        $('.selections').on('change', '#field222', function() {
                                            $.ajax({
                                                url: "/table111",
                                                type: "POST",
                                                data: {
                                                    "field111": $('.selections #field222').val(),
                                                    "field1": $('.selections #table2').val()
                                                },
                                                success: function(data) {
                                                    if (data[0] == "time") {
                                                        $('.selections .trigger222').remove();
                                                        $('.selections #confine222').remove();
                                                        $('.selections .selection2').append(
                                                            '                <button class="trigger222">calender</button>\n' +
                                                            '                <div class="calendar222">\n' +
                                                            '\n' +
                                                            '                </div>\n'
                                                        );
                                                        $('.calendar222').calendar({
                                                            limitRange: [['20140101', '20240101']],
                                                            isRange: true,
                                                            'onSelect': function (range) {
                                                                calendar222_begin = range[0];
                                                                calendar222_end = range[range.length-1];
                                                            }
                                                        });
                                                        $('.selections').popup({
                                                            trigger: '.trigger222',
                                                            triggerType: 'mouse',
                                                            node: '.calendar222'
                                                        });
                                                    }
                                                    else {
                                                        $('.selections #confine222').remove();
                                                        $('.selections .trigger222').remove();
                                                        $('.selections .selection2').append('<select id="confine222" multiple="multiple" size="5"></select>');
                                                        for (var i = 0; i < data.length; i++) {
                                                            $('.selections #confine222').append('<option value="' + data[i] + '">' + data[i] + '</option>');
                                                        }
                                                    }
                                                }
                                            })
                                        })
                                    })
                                    // $('.selections').on('change', '#type1', function() {
                                    //     if ( ($('.selections #type1').val() == "bar") || ($('.selections #type1').val() == "pie")) {
                                    //         $('.selections #field11').remove();
                                    //     }
                                    //     if ( ($('.selections #type1').val() == "scatter") || ($('.selections #type1').val() == "line")) {
                                    //         $('.selections #field11').remove();
                                    //         $('.selections #field1').after('<select id="field11"></select>');
                                    //         for (var i = 0; i < data.length; i++) {
                                    //             $('.selections #field11').append('<option value="' + data[i] + '">' + data[i] + '</option>');
                                    //         }
                                    //     }
                                    // })
                                }
                            });
                        });
                    });
                </script>


                <div class="selections"></div>
                <div class="charts"></div>


                <!--                <div class="table_select_bar">-->
                <!--                    &lt;!&ndash;              下拉框&ndash;&gt;-->
                <!--                    <select id="table_selected">-->
                <!--                        <script type="text/javascript">-->
                <!--                            var data = eval("(" + '${tables}' + ")");-->
                <!--                            for (var i = 0; i < data.length; i++) {-->
                <!--                                $("#table_selected").append("<option value=" + data[i] + ">" + data[i] + "</option>");-->
                <!--                            }-->
                <!--                        </script>-->
                <!--                    </select>-->
                <!--                    <button id="table_select_button">选择这个表</button>-->
                <!--                </div>-->
                <!--                <p>表中最早的时间：${min_time};最晚的时间：${max_time}</p>-->
                <!--                <script>//点击按钮来选择对应表-->
                <!--                $(document).ready(function () {-->
                <!--                    $("#table_select_button").click(function () {-->
                <!--                        window.location.href='traffic_jam_' + $("#table_selected").val();-->
                <!--                    });-->
                <!--                });-->
                <!--                </script>-->


                <!--                <div class="select">-->
                <!--                    <select id="day" style="padding-left:5px;padding-right:5px;font-size: 16px;">-->

                <!--                        <script>-->
                <!--                            for (var i = 0; i <= 31; i++) {-->
                <!--                                $(".select #day").append("<option value=" + i + ">" + i + "</option>");-->

                <!--                            }-->
                <!--                        </script>-->
                <!--                    </select>|日-->
                <!--                    <select id="week" style="padding-left:5px;padding-right:5px;font-size: 16px;">-->
                <!--                        <option value="0">null</option>-->
                <!--                        <option value="1">显示本周</option>-->
                <!--                    </select>|周-->
                <!--                    <select id="month" style="padding-left:5px;padding-right:5px;font-size: 16px;">-->
                <!--                        <script>-->
                <!--                            for (var i = 0; i <= 12; i++) {-->
                <!--                                $(".select #month").append("<option value=" + i + ">" + i + "</option>");-->

                <!--                            }-->
                <!--                        </script>-->
                <!--                    </select>|月-->
                <!--                    <select id="year" style="padding-left:5px;padding-right:5px;font-size: 16px;">-->
                <!--                        <script>-->
                <!--                            data = eval("(" + '${years}' + ")");-->
                <!--                            for (var i = 0; i < data.length; i++) {-->
                <!--                                $(".select #year").append("<option value=" + (data[i]) + ">" + (data[i]) + "</option>");-->
                <!--                            }-->
                <!--                        </script>-->
                <!--                    </select>|年-->
                <!--                    <select id="SECTIONID" style="padding-left:5px;padding-right:5px;font-size: 16px;">-->
                <!--                        <script>-->
                <!--                            data = eval("(" + '${ids}' + ")");-->
                <!--                            for (var i = 0; i < data.length; i++) {-->
                <!--                                $(".select #SECTIONID").append("<option value=" + data[i] + ">" + data[i] + "</option>");-->
                <!--                            }-->
                <!--                        </script>-->
                <!--                    </select>|SECTIONID-->
                <!--                    <button id="submit" style="padding-left:5px;padding-right:5px;font-size: 16px;">-->
                <!--                        |submit-->
                <!--                    </button>-->
                <!--                    <script  src="../../static/assets/LYWutils.js" charset="utf-8" type="text/javascript"></script>-->
                <!--                    <script>-->
                <!--                        $(document).ready(function () {-->
                <!--                            $(".select #submit").click(function () {-->
                <!--                                $.ajax({-->
                <!--                                    url: "/ANLYS_GS_SECTION_COMPUTE_getdata",-->
                <!--                                    type: "GET",-->
                <!--                                    data: {-->
                <!--                                        "year": $(".select #year").val(),-->
                <!--                                        "month": $(".select #month").val(),-->
                <!--                                        "day": $(".select #day").val(),-->
                <!--                                        "SECTIONID": $(".select #SECTIONID").val(),-->
                <!--                                        "week": $(".select #week").val(),-->
                <!--                                    },-->
                <!--                                    success: function (data) {-->
                <!--                                        create_chart('time', 'STATUS', data["COMPUTETIME"], data["STATUS"], 'scatter', 'STATUS');-->
                <!--                                        create_chart('time', 'TRAVELTIME', data["COMPUTETIME"], data["TRAVELTIME"], 'scatter', 'TRAVELTIME');-->
                <!--                                        create_chart('time', 'INDEY', data["COMPUTETIME"], data["INDEY"], 'scatter', 'INDEY');-->
                <!--                                        create_chart('time', 'RUNNINGSPEED', data["COMPUTETIME"], data["RUNNINGSPEED"], 'scatter', 'RUNNINGSPEED');-->


                <!--                                    }-->
                <!--                                });-->
                <!--                            });-->
                <!--                        });-->
                <!--                    </script>-->
                <!--                </div>-->







            </div>


        </div></div>


    <!--        <form role="form" class="select" action="localhost:8080/traffic_jam" method="post">-->
    <!--          <select name="select">-->
    <!--            <option  value ="volvo">Volvo</option>-->
    <!--            <option value ="saab">Saab</option>-->
    <!--            <option value="opel">Opel</option>-->
    <!--            <option value="audi">Audi</option>-->
    <!--          </select>-->
    <!--          <input type="submit" value="submit">-->
    <!--        </form>-->

    <!--      <p>asdfasdfasdf</p>-->
    <!--      <p>${index_list}</p>-->
    <!--        <script>-->
    <!--          var a = return_list(eval("(" + '${index_id}' + ")"), "INSERT_TIME");-->
    <!--          alert(a.toString());-->
    <!--        </script>-->


    <!--        <footer class="footer mt-auto">-->
    <!--            <div class="copyright bg-white">-->
    <!--                <p>-->
    <!--                    &copy; <span id="copy-year">2019</span> Copyright Sleek Dashboard Bootstrap Template - More-->
    <!--                    Templates <a-->
    <!--                        href="http://www.cssmoban.com/" target="_blank" title="模板之家">模板之家</a> - Collect from <a-->
    <!--                        href="http://www.cssmoban.com/" title="网页模板" target="_blank">网页模板</a>-->
    <!--                </p>-->
    <!--            </div>-->
    <!--            <script>-->
    <!--                var d = new Date();-->
    <!--                var year = d.getFullYear();-->
    <!--                document.getElementById("copy-year").innerHTML = year;-->
    <!--            </script>-->
    <!--        </footer>-->


</div>

</div>


<script src="../../static/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../../static/assets/plugins/toaster/toastr.min.js"></script>
<script src="../../static/assets/plugins/slimscrollbar/jquery.slimscroll.min.js"></script>
<script src="../../static/assets/plugins/charts/Chart.min.js"></script>
<script src="../../static/assets/plugins/ladda/spin.min.js"></script>
<script src="../../static/assets/plugins/ladda/ladda.min.js"></script>
<script src="../../static/assets/plugins/jquery-mask-input/jquery.mask.min.js"></script>
<script src="../../static/assets/plugins/select2/js/select2.min.js"></script>
<script src="../../static/assets/plugins/jvectormap/jquery-jvectormap-2.0.3.min.js"></script>
<script src="../../static/assets/plugins/jvectormap/jquery-jvectormap-world-mill.js"></script>
<script src="../../static/assets/plugins/daterangepicker/moment.min.js"></script>
<script src="../../static/assets/plugins/daterangepicker/daterangepicker.js"></script>
<script src="../../static/assets/plugins/jekyll-search.min.js"></script>
<script src="../../static/assets/js/sleek.js"></script>
<script src="../../static/assets/js/chart.js"></script>
<script src="../../static/assets/js/date-range.js"></script>
<script src="../../static/assets/js/map.js"></script>
<script src="../../static/assets/js/custom.js"></script>


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
<script src="../../static/assets/js/echarts-gl.min.js"></script>
<!--  <script>-->
<!--    //柱状图-->
<!--    var index = eval("(" + '${list}' + ")");-->
<!--    var large = 0;-->
<!--    var small = 0;-->
<!--    var common = 0;-->
<!--    for (var i = 0; i < index.length; i++) {-->
<!--      large = large + index[i].LARGECOUNT;-->
<!--      small = small + index[i].SMALLCOUNT;-->
<!--      common = common + index[i].COMMCOUNT;-->
<!--    }-->
<!--    var dataset = [ large, small, common ];  //数据（表示矩形的宽度）-->

<!--    var width = 300;  //画布的宽度-->
<!--    var height = 300;   //画布的高度-->

<!--    var svg = d3.select("#parallel-1-1")     //选择文档中的body元素-->
<!--            .append("svg")          //添加一个svg元素-->
<!--            .attr("width", width)       //设定宽度-->
<!--            .attr("height", height);    //设定高度-->

<!--    var rectHeight = 25;   //每个矩形所占的像素高度(包括空白)-->

<!--    svg.selectAll("rect")-->
<!--            .data(dataset)-->
<!--            .enter()-->
<!--            .append("rect")-->
<!--            .attr("x",20)-->
<!--            .attr("y",function(d,i){-->
<!--              return i * rectHeight;-->
<!--            })-->
<!--            .attr("width",function(d){-->
<!--              return d;-->
<!--            })-->
<!--            .attr("height",rectHeight-2)-->
<!--            .attr("fill","steelblue");-->
<!--    d3.select(".content-wrapper").selectAll("p").data(dataset).enter().text(d);-->
<!--  </script>-->


<!--  <script>-->
<!--    var ww = 500;-->
<!--    var hh = 100;-->
<!--    var barPadding = 3;-->

<!--    var dataset1 = [-->
<!--      [5, 20], [480, 90], [250, 50], [100, 33], [330, 95],-->
<!--      [410, 12], [475, 44], [25, 67], [85, 21], [220, 88]-->
<!--    ];-->

<!--    //Create SVG element-->
<!--    var svg = d3.select("#3Dbar")-->
<!--            .append("svg")-->
<!--            .attr("width", ww)-->
<!--            .attr("height", hh);-->

<!--    svg.selectAll("circle")-->
<!--            .data(dataset1)-->
<!--            .enter()-->
<!--            .append("circle")-->
<!--            .attr("cx", function(d) {-->
<!--              return d[0];-->
<!--            })-->
<!--            .attr("cy", function(d) {-->
<!--              return d[1];-->
<!--            })-->
<!--            .attr("r", 5)-->
<!--            .attr("fill", "rgb(0,0,255)");-->
<!--  </script>-->


</body>

</html>
